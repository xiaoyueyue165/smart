<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // function compose(...funcs) {
      //   if (funcs.length === 0) {
      //     return arg => arg;
      //   }

      //   if (funcs.length === 1) {
      //     return funcs[0];
      //   }

      //   return funcs.reduce((a, b) => (...args) => a(b(...args)));
      // }
      const compose = (...fns) =>
        fns.reduce((f, g) => (...args) => f(g(...args)));
      const composeRight = (...fns) =>
        fns.reduce((f, g) => (...args) => g(f(...args)));
      const add5 = x => x + 5;
      const add = (x, y) => x + y;
      const square = x => x * x;
      const multiply = (x, y) => x * y;
      // 从右到左计算
      let composeFn = compose(
        add5,
        multiply
      );
      // 从左到右计算
      let composeRightFn = composeRight(add, square);
      let a = composeFn(5, 2);
      let b = composeRightFn(1, 2);

      console.log(a);
      console.log(b);
    </script>
  </body>
</html>
